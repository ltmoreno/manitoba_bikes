<header class="py-lg-5 py-4 px-0 border-bottom border-bottom-lg-0">
	<div class="container-fluid">
		<div class="row w-100 align-items-center g-0 gx-lg-3">
			<div class="col-xxl-9 col-lg-8">
				<div class="d-flex align-items-center">
					<a class="navbar-brand d-none d-lg-block" href="/">
						<%= image_tag("logo/manitoba-bikes-logo.png", width: 160, alt: "Manitoba Bikes Logo") %>
					</a>
					<div class="w-100 ms-4 d-none d-lg-block">
						<%= form_tag(bike_filter_path, method: :get) do %>
							<div class="input-group">
								<select class="form-select" name="category" id="category">
									<option value="all">All Categories</option>
									<% get_categories.each do |c|%>
										<option value="<%= c.name %>"><%= c.name %></option>
									<% end %>
								</select>
								<input type="text" aria-label="Last name" class="form-control w-45" placeholder="Search for bicycles" name="search" />
								<button class="input-group-text bg-transparent" type="submit">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="16"
										height="16"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										class="feather feather-search"
									>
										<circle cx="11" cy="11" r="8"></circle>
										<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
									</svg>
								</button>
							</div>
						<% end%>
					</div>
				</div>
				<div class="d-flex justify-content-between w-100 d-lg-none">
					<a class="navbar-brand" href="/">
						<%= image_tag("logo/manitoba-bikes-logo.png", width: 160, alt: "Manitoba Bikes Logo") %>
					</a>
					<div class="d-flex align-items-center lh-1">
						<div class="list-inline me-4">
							<div class="list-inline-item">
								<a href="#!" class="text-muted" data-bs-toggle="modal" data-bs-target="#userModal">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="20"
										height="20"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										class="feather feather-user"
									>
										<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
										<circle cx="12" cy="7" r="4"></circle>
									</svg>
								</a>
							</div>
							<div class="list-inline-item">
								<a class="text-muted position-relative" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" href="#offcanvasExample" role="button" aria-controls="offcanvasRight">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="20"
										height="20"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										class="feather feather-shopping-bag"
									>
										<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
										<line x1="3" y1="6" x2="21" y2="6"></line>
										<path d="M16 10a4 4 0 0 1-8 0"></path>
									</svg>
									<% if cart.present? %>
										<span id="cart-badge1" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success">
											<%= session[:shopping_cart].values.sum%>
											<span class="visually-hidden">unread messages</span>
										</span>
									<% end %>
								</a>
							</div>
						</div>
						<!-- Button -->
						<button class="navbar-toggler collapsed" type="button" data-bs-toggle="offcanvas" data-bs-target="#navbar-default" aria-controls="navbar-default" aria-label="Toggle navigation">
							<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-text-indent-left text-primary" viewBox="0 0 16 16">
								<path
									d="M2 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm.646 2.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L4.293 8 2.646 6.354a.5.5 0 0 1 0-.708zM7 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm-5 3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"
								/>
							</svg>
						</button>
					</div>
				</div>
			</div>
			<div class="col-xxl-3 col-lg-4 d-flex align-items-center">
				<div class="list-inline ms-auto d-lg-block d-none">
					<div class="list-inline-item me-5">
					</div>

					<div class="list-inline-item">
						<a class="text-reset position-relative" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" href="#offcanvasExample" role="button" aria-controls="offcanvasRight">
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="20"
								height="20"
								viewBox="0 0 24 24"
								fill="none"
								stroke="currentColor"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
								class="feather feather-shopping-bag"
							>
								<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
								<line x1="3" y1="6" x2="21" y2="6"></line>
								<path d="M16 10a4 4 0 0 1-8 0"></path>
							</svg>

							<% if cart.present? %>
								<span id="cart-badge2" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success">
									<%= session[:shopping_cart].values.sum %>
									<span class="visually-hidden">unread messages</span>
								</span>
							<% end %>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</header>
<!-- navbar -->
<div class="border-bottom">
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary py-0 py-lg-2 navbar-default" aria-label="Offcanvas navbar large">
		<div class="container">
			<div class="offcanvas offcanvas-start" tabindex="-1" id="navbar-default" aria-labelledby="navbar-defaultLabel">
				<div class="offcanvas-header pb-1">
					<a href="/">
            <%= image_tag("logo/manitoba-bikes-logo.png", width: 160, alt: "Manitoba Bikes Logo") %>
          </a>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<div class="d-block d-lg-none mb-4">
						<form role="search">
							<div class="input-group">
								<input class="form-control rounded" type="search" placeholder="Search for bicycles" name="search" />
								<span class="input-group-append">
									<button class="btn bg-white border border-start-0 ms-n10 rounded-0 rounded-end" type="button">
										<svg
											xmlns="http://www.w3.org/2000/svg"
											width="16"
											height="16"
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
											class="feather feather-search"
										>
											<circle cx="11" cy="11" r="8"></circle>
											<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
										</svg>
									</button>
								</span>
							</div>
						</form>
					</div>
					<div class="d-block d-lg-none mb-4">
						<a
							class="btn btn-primary w-100 d-flex justify-content-center align-items-center"
							data-bs-toggle="collapse"
							href="#collapseExample"
							role="button"
							aria-expanded="false"
							aria-controls="collapseExample"
						>
							<span class="me-2">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									width="16"
									height="16"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="1.5"
									stroke-linecap="round"
									stroke-linejoin="round"
									class="feather feather-grid"
								>
									<rect x="3" y="3" width="7" height="7"></rect>
									<rect x="14" y="3" width="7" height="7"></rect>
									<rect x="14" y="14" width="7" height="7"></rect>
									<rect x="3" y="14" width="7" height="7"></rect>
								</svg>
							</span>
							All Categories
						</a>
						<div class="collapse mt-2" id="collapseExample">
							<div class="card card-body">
								<ul class="mb-0 list-unstyled">
									<% get_categories.each do |c|%>
										<li><%= link_to c.name, "/categories/#{c.name}", class: "dropdown-item" %></li>
									<% end %>
								</ul>
							</div>
						</div>
					</div>
					<div class="dropdown me-3 d-none d-lg-block">
						<button class="btn btn-primary px-6" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
							<span class="me-1">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									width="16"
									height="16"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="1.2"
									stroke-linecap="round"
									stroke-linejoin="round"
									class="feather feather-grid"
								>
									<rect x="3" y="3" width="7" height="7"></rect>
									<rect x="14" y="3" width="7" height="7"></rect>
									<rect x="14" y="14" width="7" height="7"></rect>
									<rect x="3" y="14" width="7" height="7"></rect>
								</svg>
							</span>
							All Categories
						</button>
						<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
							<% get_categories.each do |c|%>
								<li><%= link_to c.name, "/categories/#{c.name}", class: "dropdown-item" %></li>
							<% end %>
						</ul>
					</div>
					<div>
						<ul class="navbar-nav align-items-center navbar-offcanvas-color">
							<li class="nav-item w-100 w-lg-auto">
								<a class="nav-link" href="/">Home</a>
							</li>
							<li class="nav-item dropdown w-100 w-lg-auto">
								<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Brands</a>
								<ul class="dropdown-menu">
									<% get_brands.each do |b|%>
										<li><%= link_to b.name, "/brands/#{b.name}", class: "dropdown-item" %></li>
									<% end %>
								</ul>
							</li>
							<li class="nav-item dropdown w-100 w-lg-auto">
								<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Pages</a>
								<ul class="dropdown-menu">
									<% get_pages.each do |p| %>
										<li><%= link_to p.title, "/pages/#{p.permalink}", class: "dropdown-item" %></li>
									<% end %>
								</ul>
							</li>
							<li class="nav-item dropdown w-100 w-lg-auto">
								<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Account</a>
								<ul class="dropdown-menu">
									<% if customer_signed_in? %>
										<li><a class="dropdown-item" href="@@webRoot/pages/account-orders.html">Orders</a></li>
										<li><a class="dropdown-item" href="@@webRoot/pages/account-settings.html">Settings</a></li>
										<li><a class="dropdown-item" href="@@webRoot/pages/account-address.html">Address</a></li>
										<li><a class="dropdown-item" href="@@webRoot/pages/account-payment-method.html">Payment Method</a></li>
										<li><a class="dropdown-item" href="@@webRoot/pages/account-notification.html">Notification</a></li>
										<li><%= button_to 'Logout', destroy_customer_session_path, method: :delete, class:"dropdown-item"  %></li>
									<% else %>
										<li><a class="dropdown-item" href="<%= customer_session_path %>">Sign in</a></li>
										<li><a class="dropdown-item" href="<%= new_customer_registration_path %>">Signup</a></li>
										<li><a class="dropdown-item" href="@@webRoot/pages/forgot-password.html">Forgot Password</a></li>
									<% end %>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</nav>
</div>
<!-- Shop Cart -->

<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
	<div class="offcanvas-header border-bottom">
		<div class="text-start">
			<h5 id="offcanvasRightLabel" class="mb-0 fs-4">Bike Cart</h5>
		</div>
		<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
	</div>
	<div class="offcanvas-body">
		<div>
			<!-- alert -->
			<div class="alert alert-danger p-2" role="alert">
				You’ve got FREE delivery. Start
				<a href="#!" class="alert-link">checkout now!</a>
			</div>
			<ul class="list-group list-group-flush">
				<!-- list group -->
				<% cart.each do |bike|%>
				<li class="list-group-item py-3 ps-0 border-top">
					<!-- row -->
					<div class="row align-items-center">
						<div class="col-6 col-md-6 col-lg-7">
							<div class="d-flex">
                <%= image_tag(bike.photo.variant(:thumb), class: "icon-shape icon-xxl", alt: bike.model) %>
								<div class="ms-3">
									<!-- title -->
									<a href="<%= bike_path(bike) %>" class="text-inherit">
										<h6 class="mb-0"><%= bike.model %></h6>
									</a>
									<span><small class="text-muted"><%= bike.brand.name %></small></span>
									<!-- text -->
									<div class="mt-2 small lh-1">
              			<%= form_with url: cart_path(bike.id), method: :delete do  %>
											<%= hidden_field_tag(:id, bike.id) %>
											<a class="text-decoration-none text-inherit" onclick="this.closest('form').submit();return false;">
												<span class="me-1 align-text-bottom">
													<svg
														xmlns="http://www.w3.org/2000/svg"
														width="14"
														height="14"
														viewBox="0 0 24 24"
														fill="none"
														stroke="currentColor"
														stroke-width="2"
														stroke-linecap="round"
														stroke-linejoin="round"
														class="feather feather-trash-2 text-success"
													>
														<polyline points="3 6 5 6 21 6"></polyline>
														<path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
														<line x1="10" y1="11" x2="10" y2="17"></line>
														<line x1="14" y1="11" x2="14" y2="17"></line>
													</svg>
												</span>
												</span class="text-muted">Remove</span>
											</a>
										<% end %>
									</div>
								</div>
							</div>
						</div>
						<!-- input group -->
						<div class="col-4 col-md-3 col-lg-3">
							<!-- input -->
							<!-- input -->
							<div class="input-group input-spinner">
              	<%= form_with url: cart_path(bike.id), method: :patch do  %>
									<%= hidden_field_tag(:id, bike.id) %>
									<%= hidden_field_tag(:button_type, "decrement") %>
									<input type="submit" value="-" class="button-minus btn btn-sm" data-field="quantity" />
								<% end %>
									<input type="number" step="1" max="10" value="<%= item_quantity(bike.id) %>" name="quantity" class="quantity-field form-control-sm form-input" />
								<%= form_with url: cart_path(bike.id), method: :patch do  %>
									<%= hidden_field_tag(:id, bike.id) %>
									<%= hidden_field_tag(:button_type, "increment") %>
									<input type="submit" value="+" name="decrement_button" class="button-plus btn btn-sm"  data-field="quantity" />
								<% end %>
							</div>
						</div>
						<!-- price -->
						<div class="col-2 text-lg-end text-start text-md-end col-md-2">
							<span class="fw-bold"><%= number_to_currency(bike.price) %></span>
						</div>
					</div>
				</li>
				<% end %>
			</ul>
			<!-- btn -->
			<% if cart.present? %>
			<div class="d-flex justify-content-between mt-4">
				<a href="<%= checkout_index_path %>" class="btn btn-primary">Checkout</a>
			</div>
			<% end %>
		</div>
	</div>
</div>
<script src="../assets/vendors/validation.js"></script>
